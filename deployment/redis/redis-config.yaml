apiVersion: v1
kind: ConfigMap
metadata:
  name: redis-config
  namespace: redis
data:
  redis.conf: |-
    maxmemory 1000mb
    maxmemory-policy allkeys-lru
    protected-mode no 
    tcp-backlog 511 
    daemonize no 
    supervised no 
    dir /data 
    pidfile /data/redis_6379.pid
    port 6379
    loglevel notice 
    logfile "" 
    databases 16 
    stop-writes-on-bgsave-error yes 
    rdbcompression yes 
    rdbchecksum yes 
    dbfilename dump.rdb 
    replica-serve-stale-data yes 
    replica-read-only no 
    repl-diskless-sync no 
    repl-diskless-sync-delay 5 
    repl-disable-tcp-nodelay no 
    replica-priority 100 
    lazyfree-lazy-eviction no 
    lazyfree-lazy-expire no 
    lazyfree-lazy-server-del no 
    replica-lazy-flush no 
    appendonly no 
    appendfilename "appendonly.aof" 
    appendfsync everysec 
    no-appendfsync-on-rewrite no 
    auto-aof-rewrite-percentage 100 
    auto-aof-rewrite-min-size 64mb 
    aof-load-truncated yes 
    aof-use-rdb-preamble yes 
    lua-time-limit 5000 
    slowlog-log-slower-than 10000 
    slowlog-max-len 128 
    latency-monitor-threshold 0 
    notify-keyspace-events "" 
    set-max-intset-entries 512 
    hll-sparse-max-bytes 3000 
    stream-node-max-bytes 4096 
    stream-node-max-entries 100 
    activerehashing yes 
    client-output-buffer-limit normal 0 0 0 
    client-output-buffer-limit replica 256mb 64mb 60 
    client-output-buffer-limit pubsub 32mb 8mb 60 
    hz 10 
    dynamic-hz yes 
    aof-rewrite-incremental-fsync yes 
    rdb-save-incremental-fsync yes
